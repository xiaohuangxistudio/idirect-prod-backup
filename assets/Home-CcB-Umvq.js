import{_ as D,m as v,h as d,c as p,a as n,b as t,g as I,t as r,w as i,r as s,o as g,f as m}from"./index-Cm55Gr8Q.js";import T from"./CheckNotice-Clujt6Gc.js";import A from"./GetAnnounce-DC0WFN4G.js";const H={name:"MerchantHome",components:{CheckNotice:T,GetAnnounce:A},data(){return{active:"home",userInfo:{},homeData:{todayOrders:0,todayAmount:0,totalOrders:0,totalAmount:0},loadingUserInfo:!0,loadingHomeData:!0}},mounted(){this.fetchUserInfo(),this.fetchHomeData()},methods:{navigateTo(o){this.$router.push(o)},async fetchUserInfo(){try{const o=await v.get("/api/merchant/getUserInfoByAuthV1");o.data.code===200?this.userInfo=o.data.data:d("用户信息加载失败")}catch(o){console.error("Fetch userInfo error:",o),d("网络错误")}finally{this.loadingUserInfo=!1}},async fetchHomeData(){try{const o=await v.get("/api/merchant/getHomePageSalesV1");o.data.code===200?this.homeData=o.data.data:d("数据加载失败")}catch(o){console.error("Fetch homeData error:",o),d("网络错误")}finally{this.loadingHomeData=!1}},handleTabChange(o){console.log("Tab changed to:",o)},navigateToCreateDelivery(){this.$router.push("/merchant/create-delivery")}}},x={class:"page"},V={class:"tab-content"},U={key:1},w={class:"grid-container"},N={class:"grid-item"},B={class:"grid-item"},F={class:"grid-item"},O={class:"grid-item"};function G(o,e,P,S,a,l){const f=s("van-nav-bar"),_=s("GetAnnounce"),y=s("van-skeleton"),c=s("van-icon"),b=s("van-button"),u=s("van-tabbar-item"),k=s("van-tabbar"),C=s("CheckNotice");return g(),p("div",x,[n(f,{fixed:"",title:"主页"}),t("div",V,[t("div",null,[n(_,{pageKey:"merchantHomePagePost"})]),a.loadingUserInfo||a.loadingHomeData?(g(),I(y,{key:0,title:"",row:3})):(g(),p("div",U,[t("h2",null,"欢迎您，"+r(a.userInfo.nickname??"Admin")+" 👋",1),t("div",w,[t("div",N,[n(c,{name:"shopping-cart-o",class:"grid-icon"}),e[3]||(e[3]=t("h3",null,"今日订单",-1)),t("p",null,r(a.homeData.todayOrders),1)]),t("div",B,[n(c,{name:"gold-coin-o",class:"grid-icon"}),e[4]||(e[4]=t("h3",null,"今日金额",-1)),t("p",null,"$"+r(a.homeData.todayAmount.toFixed(2)),1)]),t("div",F,[n(c,{name:"cart-circle-o",class:"grid-icon"}),e[5]||(e[5]=t("h3",null,"总订单",-1)),t("p",null,r(a.homeData.totalOrders),1)]),t("div",O,[n(c,{name:"cashier-o",class:"grid-icon"}),e[6]||(e[6]=t("h3",null,"总金额",-1)),t("p",null,"$"+r(a.homeData.totalAmount.toFixed(2)),1)])]),n(b,{type:"primary",block:"",onClick:l.navigateToCreateDelivery,class:"create-order-button"},{default:i(()=>e[7]||(e[7]=[m(" 创建配送订单 ")])),_:1},8,["onClick"])])),n(k,{modelValue:a.active,"onUpdate:modelValue":e[2]||(e[2]=h=>a.active=h),onChange:l.handleTabChange},{default:i(()=>[n(u,{name:"home",icon:"home-o"},{default:i(()=>e[8]||(e[8]=[m("主页")])),_:1}),n(u,{name:"orders",icon:"description-o",onClick:e[0]||(e[0]=h=>l.navigateTo("/merchant/order"))},{default:i(()=>e[9]||(e[9]=[m("订单列表")])),_:1}),n(u,{name:"setting",icon:"setting-o",onClick:e[1]||(e[1]=h=>l.navigateTo("/merchant/setting"))},{default:i(()=>e[10]||(e[10]=[m("设置")])),_:1})]),_:1},8,["modelValue","onChange"])]),n(C)])}const j=D(H,[["render",G],["__scopeId","data-v-eac982e6"]]);export{j as default};
