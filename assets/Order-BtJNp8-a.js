import{_ as x,x as L,m as D,h as I,c as u,a as r,b as t,w as l,r as p,o as d,F as b,e as c,t as o,f as s,d as k,g as _}from"./index-Cm55Gr8Q.js";import S from"./CheckNotice-Clujt6Gc.js";import E from"./GetAnnounce-DC0WFN4G.js";const F={name:"MerchantOrder",components:{CheckNotice:S,GetAnnounce:E},data(){return{active:"order",userInfo:{},activeTab:"all",orders:[],showLoading:null,isRefreshing:null,announcement:""}},mounted(){this.fetchOrderInfo()},methods:{handleTabChange(i){console.log("Tab changed to:",i)},navigateTo(i){this.$router.push(i)},async fetchOrderInfo(){const i={all:null,submitted:"REVIEW",in_delivery:"IN_DELIVERY",finished:"FINISH"};this.showLoading=L({message:"加载中...",forbidClick:!0});try{console.log(this.activeTab);const e=i[this.activeTab],v=await D.get("/api/merchant/todayOrderV2",{params:e?{status:e}:{}});v.data.code===200?(this.orders=v.data.data.orderInfo||[],this.announcement=v.data.data.announcement):I(v.data.message||"加载失败")}catch(e){I("网络错误，请稍后重试"),console.error("Fetch orders error:",e)}finally{this.isRefreshing=!1,this.showLoading&&this.showLoading.close()}},onTabChange(i){this.activeTab!==i&&(this.activeTab=i,this.orders=[],console.log("触发tab change: "+i),this.onRefresh())},onRefresh(){console.log("触发list刷新"),this.fetchOrderInfo()},navigateToTrackOrder(i){this.$router.push({path:"/merchant/track-delivery",query:{deliveryId:i}})},logout(){this.$router.push("/merchant/login"),this.$toast.success("已退出登录")}}},P={class:"page"},U={class:"header"},B={class:"tab-content"},G={class:"scrollable-content"},M={class:"tab-content"},q={key:0},H={class:"scrollable-content"},K={class:"tab-content"},W={key:0},Y={class:"scrollable-content"},j={class:"tab-content"},z={key:0},J={class:"scrollable-content"},Q={class:"tab-content"},X={key:0};function Z(i,e,v,$,a,g){const V=p("van-nav-bar"),A=p("GetAnnounce"),f=p("van-tag"),y=p("el-card"),m=p("el-empty"),h=p("van-pull-refresh"),T=p("van-tab"),N=p("van-tabs"),R=p("van-tabbar-item"),O=p("van-tabbar"),w=p("CheckNotice");return d(),u("div",P,[r(V,{fixed:"",title:"订单列表"}),t("div",U,[t("div",B,[t("div",null,[r(A,{pageKey:"merchantOrderListPost"})]),r(N,{class:"tab-container",swipeable:"",onChange:g.onTabChange},{default:l(()=>[r(T,{title:"全部",name:"all"},{default:l(()=>[t("div",G,[r(h,{modelValue:a.isRefreshing,"onUpdate:modelValue":e[0]||(e[0]=n=>a.isRefreshing=n),onRefresh:g.onRefresh},{default:l(()=>[t("div",M,[a.orders.length?(d(!0),u(b,{key:0},c(a.orders,n=>(d(),u("div",{key:n.deliveryId},[r(y,{style:{"margin-bottom":"10px"},shadow:"hover",onClick:C=>g.navigateToTrackOrder(n.deliveryId)},{header:l(()=>[t("strong",null,"订单号: "+o(n.deliveryId),1)]),default:l(()=>[t("p",null,[e[7]||(e[7]=t("strong",null,"商家名称: ",-1)),s(" "+o(n.merchantName),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"客户名称: ",-1)),s(" "+o(n.customerName),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"客户地址: ",-1)),s(" "+o(n.customerAddress),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"配送时间: ",-1)),s(" "+o(n.deliveryTimeOption==="ASAP"?"尽快":n.deliveryTime),1)]),n.statusTagType?(d(),u("p",q,[e[11]||(e[11]=t("strong",null,"配送状态: ",-1)),r(f,{plain:"",type:n.statusTagType},{default:l(()=>[s(o(n.statusDesc),1)]),_:2},1032,["type"])])):k("",!0),t("p",null,[e[12]||(e[12]=t("strong",null,"配送费用: ",-1)),s(" "+o(n.deliveryAmount),1)])]),_:2},1032,["onClick"])]))),128)):(d(),_(m,{key:1,description:"暂无订单"}))])]),_:1},8,["modelValue","onRefresh"])])]),_:1}),r(T,{title:"已提交",name:"submitted"},{default:l(()=>[t("div",H,[r(h,{modelValue:a.isRefreshing,"onUpdate:modelValue":e[1]||(e[1]=n=>a.isRefreshing=n),onRefresh:g.onRefresh},{default:l(()=>[t("div",K,[a.orders.length?(d(!0),u(b,{key:0},c(a.orders,n=>(d(),u("div",{key:n.deliveryId},[r(y,{style:{"margin-bottom":"10px"},shadow:"hover",onClick:C=>g.navigateToTrackOrder(n.deliveryId)},{header:l(()=>[t("strong",null,"订单号: "+o(n.deliveryId),1)]),default:l(()=>[t("p",null,[e[13]||(e[13]=t("strong",null,"商家名称: ",-1)),s(" "+o(n.merchantName),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"客户名称: ",-1)),s(" "+o(n.customerName),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"客户地址: ",-1)),s(" "+o(n.customerAddress),1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"配送时间: ",-1)),s(" "+o(n.deliveryTimeOption==="ASAP"?"尽快":n.deliveryTime),1)]),n.statusTagType?(d(),u("p",W,[e[17]||(e[17]=t("strong",null,"配送状态: ",-1)),r(f,{plain:"",type:n.statusTagType},{default:l(()=>[s(o(n.statusDesc),1)]),_:2},1032,["type"])])):k("",!0),t("p",null,[e[18]||(e[18]=t("strong",null,"配送费用: ",-1)),s(" "+o(n.deliveryAmount),1)])]),_:2},1032,["onClick"])]))),128)):(d(),_(m,{key:1,description:"暂无已提交订单"}))])]),_:1},8,["modelValue","onRefresh"])])]),_:1}),r(T,{title:"配送中",name:"in_delivery"},{default:l(()=>[t("div",Y,[r(h,{modelValue:a.isRefreshing,"onUpdate:modelValue":e[2]||(e[2]=n=>a.isRefreshing=n),onRefresh:g.onRefresh},{default:l(()=>[t("div",j,[a.orders.length?(d(!0),u(b,{key:0},c(a.orders,n=>(d(),u("div",{key:n.deliveryId},[r(y,{style:{"margin-bottom":"10px"},shadow:"hover",onClick:C=>g.navigateToTrackOrder(n.deliveryId)},{header:l(()=>[t("strong",null,"订单号: "+o(n.deliveryId),1)]),default:l(()=>[t("p",null,[e[19]||(e[19]=t("strong",null,"商家名称: ",-1)),s(" "+o(n.merchantName),1)]),t("p",null,[e[20]||(e[20]=t("strong",null,"客户名称: ",-1)),s(" "+o(n.customerName),1)]),t("p",null,[e[21]||(e[21]=t("strong",null,"客户地址: ",-1)),s(" "+o(n.customerAddress),1)]),t("p",null,[e[22]||(e[22]=t("strong",null,"配送时间: ",-1)),s(" "+o(n.deliveryTimeOption==="ASAP"?"尽快":n.deliveryTime),1)]),n.statusTagType?(d(),u("p",z,[e[23]||(e[23]=t("strong",null,"配送状态: ",-1)),r(f,{plain:"",type:n.statusTagType},{default:l(()=>[s(o(n.statusDesc),1)]),_:2},1032,["type"])])):k("",!0),t("p",null,[e[24]||(e[24]=t("strong",null,"配送费用: ",-1)),s(" "+o(n.deliveryAmount),1)])]),_:2},1032,["onClick"])]))),128)):(d(),_(m,{key:1,description:"暂无配送中订单"}))])]),_:1},8,["modelValue","onRefresh"])])]),_:1}),r(T,{title:"已完成",name:"finished"},{default:l(()=>[t("div",J,[r(h,{modelValue:a.isRefreshing,"onUpdate:modelValue":e[3]||(e[3]=n=>a.isRefreshing=n),onRefresh:g.onRefresh},{default:l(()=>[t("div",Q,[a.orders.length?(d(!0),u(b,{key:0},c(a.orders,n=>(d(),u("div",{key:n.deliveryId},[r(y,{style:{"margin-bottom":"10px"},shadow:"hover",onClick:C=>g.navigateToTrackOrder(n.deliveryId)},{header:l(()=>[t("strong",null,"订单号: "+o(n.deliveryId),1)]),default:l(()=>[t("p",null,[e[25]||(e[25]=t("strong",null,"商家名称: ",-1)),s(" "+o(n.merchantName),1)]),t("p",null,[e[26]||(e[26]=t("strong",null,"客户名称: ",-1)),s(" "+o(n.customerName),1)]),t("p",null,[e[27]||(e[27]=t("strong",null,"客户地址: ",-1)),s(" "+o(n.customerAddress),1)]),t("p",null,[e[28]||(e[28]=t("strong",null,"配送时间: ",-1)),s(" "+o(n.deliveryTimeOption==="ASAP"?"尽快":n.deliveryTime),1)]),n.statusTagType?(d(),u("p",X,[e[29]||(e[29]=t("strong",null,"配送状态: ",-1)),r(f,{plain:"",type:n.statusTagType},{default:l(()=>[s(o(n.statusDesc),1)]),_:2},1032,["type"])])):k("",!0),t("p",null,[e[30]||(e[30]=t("strong",null,"配送费用: ",-1)),s(" "+o(n.deliveryAmount),1)])]),_:2},1032,["onClick"])]))),128)):(d(),_(m,{key:1,description:"暂无已完成订单"}))])]),_:1},8,["modelValue","onRefresh"])])]),_:1})]),_:1},8,["onChange"])])]),t("div",null,[r(O,{modelValue:a.active,"onUpdate:modelValue":e[6]||(e[6]=n=>a.active=n),onChange:g.handleTabChange},{default:l(()=>[r(R,{name:"home",icon:"home-o",onClick:e[4]||(e[4]=n=>g.navigateTo("/merchant/home"))},{default:l(()=>e[31]||(e[31]=[s("主页")])),_:1}),r(R,{name:"order",icon:"description-o"},{default:l(()=>e[32]||(e[32]=[s("订单列表")])),_:1}),r(R,{name:"setting",icon:"setting-o",onClick:e[5]||(e[5]=n=>g.navigateTo("/merchant/setting"))},{default:l(()=>e[33]||(e[33]=[s("设置")])),_:1})]),_:1},8,["modelValue","onChange"])]),r(w)])}const oe=x(F,[["render",Z],["__scopeId","data-v-00364434"]]);export{oe as default};
