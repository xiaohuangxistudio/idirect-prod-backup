import{a as c}from"./axios-CwEm3LtT.js";import{_ as p,c as n,a as d,b as s,t as a,d as u,r as m,o as i}from"./index-Cm55Gr8Q.js";const g={data(){return{name:"DriverLocationClick",map:null,marker:null,clickedLocation:{latitude:null,longitude:null},errorMessage:null}},mounted(){this.initMap()},methods:{initMap(){const e=[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}];this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:15,styles:e}),this.marker=new google.maps.Marker({map:this.map,position:{lat:0,lng:0},title:"点击位置",icon:{url:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png"}}),this.map.addListener("click",t=>{const o={lat:t.latLng.lat(),lng:t.latLng.lng()};this.updateMarkerAndReport(o)})},async reportLocation(e){try{if(!e)return;const t=this.$route.query.deliveryId,o=await c.post("/api/unlogin_driver/updateGpsSync",{deliveryId:t,latitude:e.lat,longitude:e.lng});o.data.code===200?console.log("位置上报成功:",o.data.message):console.error("位置上报失败:",o.data.message)}catch(t){console.error("Error reporting location:",t)}},updateMarkerAndReport(e){this.marker.setPosition(e),this.clickedLocation.latitude=e.lat,this.clickedLocation.longitude=e.lng,this.reportLocation(e)}}},k={class:"page"},y={class:"status-container"},_={key:0,class:"error"};function f(e,t,o,v,r,h){const l=m("van-nav-bar");return i(),n("div",k,[d(l,{title:"点击位置上报"}),t[1]||(t[1]=s("div",{id:"map",class:"map-container"},null,-1)),s("div",y,[t[0]||(t[0]=s("p",null,[s("strong",null,"当前点击经纬度:")],-1)),s("p",null,"纬度: "+a(r.clickedLocation.latitude),1),s("p",null,"经度: "+a(r.clickedLocation.longitude),1),r.errorMessage?(i(),n("p",_,a(r.errorMessage),1)):u("",!0)])])}const b=p(g,[["render",f],["__scopeId","data-v-64543640"]]);export{b as default};
