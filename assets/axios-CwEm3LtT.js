import{i as c,u as l,s as m,j as n}from"./index-Cm55Gr8Q.js";const a=c.create({baseURL:"https://delivery-api.xiaohuangxi.studio",timeout:1e5}),i=["/driver/gps-tracker"];a.interceptors.request.use(e=>{const r=l().token;return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e));a.interceptors.response.use(e=>e,e=>{if(e.response){const{status:s,config:r,data:o}=e.response;if(s===401&&!i.some(t=>r.url.includes(t)))return m("登录已过期"),localStorage.removeItem("auth"),n.currentRoute.value.path!=="/driver/login"?n.push("/driver/login"):window.location.reload(),Promise.reject(new Error(o.message||"登录已过期"));if(s===401&&i.some(t=>r.url.includes(t)))return console.warn(`特定 URI ${r.url} 发生了 401，未跳转到登录页面`),Promise.reject(new Error(o.message||"未授权"));const u=o.message||"请求失败";return console.error("Axios 错误响应:",e.response),Promise.reject(new Error(u))}else return console.error("Axios 网络错误:",e),Promise.reject(new Error("网络出现颠簸~"))});export{a};
